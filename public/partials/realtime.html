<div class="row">
    <div class="col-md-12 col-sm-12 col-xs-12">
        <div class="dashboard_graph x_panel">
            <div class="row x_title">
                <div class="col-md-6">
                    <h3>Realtime
                        <small>live hardbeats</small>
                    </h3>
                </div>
            </div>
            <div class="x_content">
                <div class="container" style="height:250px">
                    <div id="realtime-graph" style="width: 100%; height:250px;"></div>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="../bower_components/Flot/jquery.flot.js"></script>
<script src="../bower_components/Flot/jquery.flot.time.js"></script>
<script src="../bower_components/Flot/jquery.flot.resize.js"></script>
<script src="../js/jquery.flot.axislabels.js"></script>

<script>
    $(function () {
        var data = [];
        var len = 60;
        var options = {
            xaxis: {
                mode: 'time',
                timeformat: '%S',
                axisLabel: 'Time'
            },
            yaxis: {
                axisLabel: 'BPM',
                min: 65,
                max: 75
            },
            colors: ["#26B99A"]
        };

        function translateToFlot(item) {
            var time = new Date(item.date).getTime();
            var bpm = item.bpm;
            return [[time, bpm]];
        }

        function randomPush() {
            data.shift();

            while(data.length < len) {
                var y = Math.random() * 1.7 + 69;
                var x = new Date(Date.now()).getTime() + 50 * (data.length - len);
                data.push([x, y]);
            }
        }

        function update() {
            randomPush();

            $.plot($("#realtime-graph"), [data], options);
            setTimeout(update, 150);
        }

        $(document).ready(function () {
            
            update();
        });
    });
</script>